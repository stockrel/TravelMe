 <div class="row" *ngIf="!isLoading">

  <h4>Found flights ({{results.flights.length}})</h4>
  <div class="row">
  	<form class="form-inline">
      <div class="form-group">
        <label for="from">From:</label>
        <input type="text" class="form-control" id="from" name="from" [(ngModel)]="query.from">
      </div>
      <div class="form-group">
        <label for="to">To:</label>
        <input type="text" class="form-control" id="to" name="to" [(ngModel)]="query.to">
      </div>
      <div class="form-group">
        <label for="single">Single Date:</label>
        <input type="text" class="form-control" id="single" name="single" [(ngModel)]="query.singleDate">
      </div>
      <div class="form-group">
        <label for="return">Return Date:</label>
        <input type="text" class="form-control" id="return" name="return" [(ngModel)]="query.returnDate">
      </div>
      <div class="form-group">
        <label for="flexible">Flexible:</label>
        <input type="text" class="form-control" id="flexible" name="flexible" [(ngModel)]="query.flexible">
      </div>
      <button class="btn btn-success" (click)="getFlights(query)">Search !</button>
    </form>
  </div>
  <div class="row">
    <ul class="nav nav-tabs nav-justified">
      <template ngFor let-browse [ngForOf]="browseResults">
        <li *ngIf="browse.OutboundLeg.DepartureDate.substring(0,10) == query.singleDate" class="active">
          <a data-toggle="tab" href="#{{browse.OutboundLeg.DepartureDate}}">
            {{browse.OutboundLeg.DepartureDate | date: 'MMM d'}}
            <span class="currency">{{results.query.Currency}}</span>
            <br/>
            <span class="price"><b>{{browse.MinPrice}}</b></span>
          </a>
        </li>
        <li *ngIf="browse.OutboundLeg.DepartureDate.substring(0,10) != query.singleDate">
          <a data-toggle="tab" href="#main">
            {{browse.OutboundLeg.DepartureDate | date: 'MMM d'}}
            <span class="currency">{{results.query.Currency}}</span>
            <br/>
            <span class="price"><b>{{browse.MinPrice}}</b></span>
          </a>
        </li>
      </template> 
    </ul>
      
    <div class="tab-content">
      <table id="main" class="flat-table flat-table-flights tab-pane fade in active">
        <thead>
          <tr>
            <th>Price</th>
            <th>Provider</th>
            <th>Departure</th>
            <th>Arrival</th>
            <th>Carrier</th>
            <th>Duration</th>
            <th>Stopovers</th>
          </tr>
        </thead>
        <tbody *ngIf="results.flights.length === 0">
          <tr>
            <td colspan="7">No transport option found</td>
          </tr>  
        </tbody>
        <tbody *ngIf="!isEditing">
          <tr *ngFor="let flight of results.flights">
            <td class="row"><span class="currency">{{results.query.Currency}}</span><br/><span class="price"><b>{{flight.PricingOptions[0].Price}}</b></span></td>
            <td ><img src="{{flight.PricingOptions[0].Agents[0].ImageUrl}}"></td>
            <td class="row"><span class="airportcode">{{flight.OutboundLegId.OriginStation.Code}}</span><br/><span class="dates"><b>{{flight.OutboundLegId.Departure | date: 'HH:mm'}}</b></span></td>
            <td class="row"><span class="airportcode">{{flight.OutboundLegId.DestinationStation.Code}}</span><br/><span class="dates"><b>{{flight.OutboundLegId.Arrival | date: 'HH:mm'}}</b></span></td>
            <td><img src="{{flight.OutboundLegId.Carriers[0].ImageUrl}}"></td>
            <td>{{(flight.OutboundLegId.Duration/60).toFixed(1)}}h</td>
            <td>{{flight.OutboundLegId.Stops.length > 0 ? flight.OutboundLegId.Stops.length+" stop(s)" : "Direct"}}</td>      
          </tr>  
        </tbody>
      </table>
       <div id="menu1" class="tab-pane fade">
        <h3>Menu 1</h3>
        <p>Some content in menu 1.</p>
      </div>
      <div id="menu2" class="tab-pane fade">
        <h3>Menu 2</h3>
        <p>Some content in menu 2.</p>
      </div>
    </div>
    <div [hidden]="!infoMsg.body" class="alert alert-{{infoMsg.type}} alert-dismissible" role="alert">
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
      <strong>Message:</strong> {{infoMsg.body}}
    </div>
  </div>
</div> 